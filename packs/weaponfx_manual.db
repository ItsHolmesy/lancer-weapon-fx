{"_id":"LGPQdA8CUpcw5wNR","name":"AegisDefenseNet","img":"icons/svg/ice-shield.svg","type":"script","scope":"global","author":"LancerWeaponFX00","command":"//This macro is not linked to any weapon or system and must be applied manually.  It can be removed with the accompanying 'EndDefenseNet' macro, or through the Sequencer Manager.\n//It's intended for size one targets, if you apply it to larger targets it will probably be too big. Adjust the values in the .scaleToObject() parameters below to fit.\n\nnew Sequence()\n\t.effect(\"jb2a.shield.01.intro\")\n        .atLocation(token)\n        .waitUntilFinished(-700)\n        .scaleToObject(9.5, {uniform: true})\n    .effect(\"jb2a.shield.01.loop.blue\")\n        .fadeIn(300)\n        .persist()\n        .attachTo(token, { bindVisibility: true })\n        .scaleToObject(9.5, {uniform: true})        \n.play()"}
{"_id":"D8E9YpHQsJhxBLvs","name":"Designate Pinaka Area","img":"modules/lancer-weapon-fx/icons/PinakaArea.png","type":"script","scope":"global","author":"LancerWeaponFX00","command":"// This will lay down a template suitable for designating the location of a delayed Pinaka Missile strike.\n\ngame.lancer.canvas.WeaponRangeTemplate.fromRange({\n    type: \"Blast\",\n    val: 2,\n}).placeTemplate()\n    .then(t => {\n        if (t) {\n            t.update({texture: \"modules/JB2A_DnD5e/Library/Generic/Zoning/ZoningSquare01In_01_Regular_BlueGreen_Loop_600x600.webm\", distance: 1, fillColor: \"#FF0000\" });\n        };\n    }\n)"}
{"_id":"ZNQDndUit13iQDfV","name":"Designate Smoke Grenade","img":"modules/lancer-weapon-fx/icons/SmokeGrenadeArea.png","type":"script","scope":"global","author":"LancerWeaponFX00","command":"// This will lay down a template suitable for designating the location of a delayed Pinaka Missile strike.\n\ngame.lancer.canvas.WeaponRangeTemplate.fromRange({\n    type: \"Blast\",\n    val: 2.0,\n}).placeTemplate()\n    .then(t => {\n        if (t) {\n            t.update({texture: \"modules/JB2A_DnD5e/Library/Generic/Smoke/SmokePlumes01_03_Regular_Grey_400x400.webm\", distance: 1.8, fillColor: \"#756c6c\" });\n        };\n    }\n)"}
{"_id":"EiG9UfyeoHsXCX3L","name":"Designate Smoke Mine","img":"modules/lancer-weapon-fx/icons/SmokeArea.png","type":"script","scope":"global","author":"LancerWeaponFX00","command":"// This will lay down a template suitable for designating the location of a delayed Pinaka Missile strike.\n\ngame.lancer.canvas.WeaponRangeTemplate.fromRange({\n    type: \"Blast\",\n    val: 3.0,\n}).placeTemplate()\n    .then(t => {\n        if (t) {\n            t.update({texture: \"modules/JB2A_DnD5e/Library/Generic/Smoke/SmokePlumes01_03_Regular_Grey_400x400.webm\", distance: 2.8, fillColor: \"#756c6c\" });\n        };\n    }\n)"}
{"_id":"Hlf1weIjm3FsVE9Z","name":"ElectricExplodeOnClick","img":"modules/lancer-weapon-fx/icons/crowned-explosion.png","type":"script","scope":"global","author":"LancerWeaponFX00","command":"//This Macro requires Warpgate module to function. When executed, the macro will play the explosion fx on the clicked location.  Useful for grenades or any other occurance where something needs to explode.\n\nif (typeof warpgate === \"undefined\") ui.notifications.error(\"This macro requires the Warpgate module to be installed!\");\n\nlet config = {\n    size:2,\n    icon: 'icons/White/crowned-explosion.png',\n    label: 'EGrenade',\n    interval: 1\n}\n\nlet position = await warpgate.crosshairs.show(config);\n\nlet sequence = new Sequence()\n\n\n    .effect()\n        .file(\"jb2a.explosion.02.blue\")\n        .atLocation(position)\n        .scale(0.8)\n        .name(\"impact\")\n        .delay(500)\n        .opacity(0.8)\n    .effect()\n        .file(\"jb2a.thunderwave.center.blue\")\n        .atLocation(position)\n        .name(\"impact\")\n        .scale(0.6)\n        .delay(600)\n    .sound(\"modules/lancer-weapon-fx/soundfx/AirBurst.ogg\")\n        .volume(game.modules.get(\"lancer-weapon-fx\").api.getEffectVolume(0.7))\n        .delay(500)\n\n\n.play();\n"}
{"_id":"XYuNCvqqzUsq5XkK","name":"EndDefenseNet","img":"modules/lancer-weapon-fx/icons/cracked-shield.png","type":"script","scope":"global","author":"LancerWeaponFX00","command":"//This macro is not linked to any weapon or system and must be triggered manually.  Use this macro, or the Sequencer Manager, to end the 'AegisDefenseNet' effect.\n\nlet sequence = new Sequence();\n\nnew Sequence()\n    .effect(\"jb2a.shield.01.outro_explode.blue\")\n        .atLocation(token)\n        .scaleToObject(9.5, {uniform: true})\n        .waitUntilFinished(-400)\n        .thenDo(endFX)\n.play()\n\n    function endFX() {\n        Sequencer.EffectManager.endEffects({ object: token})\n\n    }\n\nsequence.play();"}
{"_id":"BHTzvudu6KcxJI7p","name":"ExplodeOnClick","img":"modules/lancer-weapon-fx/icons/bright-explosion.png","type":"script","scope":"global","author":"LancerWeaponFX00","command":"//This Macro requires Warpgate module to function. When executed, the macro will play the explosion fx on the clicked location.  Useful for grenades or any other occurance where something needs to explode.\n\nif (typeof warpgate === \"undefined\") ui.notifications.error(\"This macro requires the Warpgate module to be installed!\");\n\nlet config = {\n    size:1,\n    icon: 'icons/White/bright-explosion.png',\n    label: 'Grenade',\n    interval: 1\n}\n\nlet position = await warpgate.crosshairs.show(config);\n\nlet sequence = new Sequence()\n\n\n    .effect()\n        .file(\"jb2a.explosion.08.orange\")\n        .atLocation(position)\n        .name(\"impact\")\n        .delay(500)\n    .effect()\n        .file(\"jb2a.explosion.shrapnel.bomb.01.black\")\n        .atLocation(position)\n        .name(\"impact\")\n        .scale(0.6)\n        .delay(600)\n    .sound(\"modules/lancer-weapon-fx/soundfx/Missile_Impact.ogg\")\n        .volume(game.modules.get(\"lancer-weapon-fx\").api.getEffectVolume(0.7))\n        .delay(500)\n\n\n.play();\n"}
{"_id":"WjxNFb3JQBla9BBC","name":"JetLancerExplosion","img":"modules/lancer-weapon-fx/icons/explosion-rays.png","type":"script","scope":"global","author":"fpthefluffypawed","command":"const {targetsMissed, targetTokens, sourceToken} = game.modules.get(\"lancer-weapon-fx\").api.getMacroVariables(this);\n\nlet sequence = new Sequence();\n\nnew Sequence()\n\t.sound(\"modules/lancer-weapon-fx/soundfx/dramaticSparkles.ogg\")\n\t\t.fadeInAudio(4000)\n\t\t.volume(0.3)\n\t\t.duration(5000)\n\t.effect(\"jb2a.static_electricity.03.blue\")\n\t\t.atLocation(sourceToken)\n\t\t.scaleToObject(1)\n\t\t.duration(5000)\n\t.canvasPan()\n\t\t.atLocation(sourceToken)\n\t\t.duration(5000)\n\t\t.scale(1)\n\t\t.waitUntilFinished()\n\t.canvasPan()\n\t\t.atLocation(sourceToken)\n\t\t.duration(100)\n\t\t.scale(2)\n\t.sound(\"modules/lancer-weapon-fx/soundfx/jetlancerSound.ogg\")\n\t.effect(\"modules/lancer-weapon-fx/video/jetlancer_explosion_1000.webm\")\n\t\t.aboveInterface()\n\t\t.atLocation(sourceToken)\n\t\t.scale(1)\n\t.canvasPan()\n\t\t.shake({duration: 5000, strength: 10, rotation: false, fadeOutDuration: 500})\n\t\t.thenDo(remainsAftermath)\n\t\t.waitUntilFinished()\n\t.effect(\"modules/lancer-weapon-fx/sprites/jetlancer_explosion_white_bg.png\")\n\t\t.delay(3600)\n\t\t.aboveInterface()\n\t\t.atLocation(sourceToken)\n\t\t.duration(1700)\n\t\t.fadeOut(300)\n\t.play()\n\nfunction remainsAftermath() {\n\tconsole.log(\"AFTERMATH\");\n\tconsole.log(sourceToken);\n\tconsole.log(canvas)\n\ttoken.document.update({hidden: true});\n\tcanvas.scene.createEmbeddedDocuments(\"Tile\", [{ \n\t\ttexture: { src: \"modules/lancer-weapon-fx/sprites/RETROGRADE-crater.png\" }, \n\t\tx: token.document.x - canvas.dimensions.size,\n\t\ty: token.document.y - (canvas.dimensions.size + (canvas.dimensions.size / 2)),\n\t\theight: canvas.dimensions.size * (token.document.width + 2),\n\t\twidth: canvas.dimensions.size * (token.document.width + 2),\n\t\ttint: \"#464646\"\n\t }]);\n}\n\n\n\nsequence.play();\n"}
{"_id":"1ntDWMtnxAA1uZMH","name":"MissileAirBurst","img":"modules/lancer-weapon-fx/icons/incoming-rocket.png","type":"script","scope":"global","author":"LancerWeaponFX00","command":"const {targetsMissed, targetTokens, sourceToken} = game.modules.get(\"lancer-weapon-fx\").api.getMacroVariables(this);\n\nconst pTarget = game.modules.get(\"lancer-weapon-fx\").api.getTargetLocationsFromTokenGroup(targetTokens, 1)[0];\n\n// Calculate the point 70% of the distance between sourceToken and pTarget\nconst pBlast = {\n    x: sourceToken.position.x + 0.6 * (pTarget.x - sourceToken.position.x),\n    y: sourceToken.position.y + 0.6 * (pTarget.y - sourceToken.position.y),\n};\n\n\nlet sequence = new Sequence()\n\n\n    .sound()\n        .file(\"modules/lancer-weapon-fx/soundfx/Missile_Launch.ogg\")\n        .volume(game.modules.get(\"lancer-weapon-fx\").api.getEffectVolume(0.5))\n    .sound()\n        .file(\"modules/lancer-weapon-fx/soundfx/Missile_Travel.ogg\")\n        .volume(game.modules.get(\"lancer-weapon-fx\").api.getEffectVolume(0.5))\n        .timeRange(700, 2000);\n    sequence.effect()\n        .file(\"jb2a.throwable.launch.missile\")\n        .scale(0.7)\n        .from(sourceToken)\n        .stretchTo(pBlast)\n        .waitUntilFinished(-200)\n    .effect()\n         .file(\"jb2a.explosion.08\")\n         .atLocation(pBlast)\n         .name(\"impact\")\n         .scale(0.8)\n         .zIndex(1)\n    .sound()\n        .file(\"modules/lancer-weapon-fx/soundfx/Flechette.ogg\")\n        .volume(game.modules.get(\"lancer-weapon-fx\").api.getEffectVolume(0.5))\n\nfor (let i=0; i < targetTokens.length; i++) {\n    let target = targetTokens[i];\n\n    sequence.effect()\n        .file(\"jb2a.bullet.02.orange\")\n\t.playIf(!targetsMissed.has(target.id))\n         .scale(0.5)\n\t .atLocation(pBlast)\n\t .stretchTo(target)\n    .effect()\n        .file(\"jb2a.explosion_side.01\")\n\t.playIf(!targetsMissed.has(target.id))\n        .atLocation(target)\n\t.rotateTowards(pBlast)\n\t.center()\n        .delay(350)\n    .sound()\n        .file(\"modules/lancer-weapon-fx/soundfx/Missile_Impact.ogg\")\n        .playIf(!targetsMissed.has(target.id))\n        .volume(game.modules.get(\"lancer-weapon-fx\").api.getEffectVolume(0.5))\n\t.delay(350);\n}\nsequence.play();\n"}
{"_id":"HOn4Xub4x5q0AmPw","name":"MissileAoE","img":"modules/lancer-weapon-fx/icons/rocket.png","type":"script","scope":"global","author":"LancerWeaponFX00","command":"const {targetsMissed, targetTokens, sourceToken} = game.modules.get(\"lancer-weapon-fx\").api.getMacroVariables(this);\n\nconst target = game.modules.get(\"lancer-weapon-fx\").api.getTargetLocationsFromTokenGroup(targetTokens, 1)[0];\n\n\nlet sequence = new Sequence()\n\n    sequence.sound()\n        .file(\"modules/lancer-weapon-fx/soundfx/Missile_Launch.ogg\")\n        .volume(game.modules.get(\"lancer-weapon-fx\").api.getEffectVolume(0.5));\n    sequence.sound()\n        .file(\"modules/lancer-weapon-fx/soundfx/Missile_Travel.ogg\")\n        .volume(game.modules.get(\"lancer-weapon-fx\").api.getEffectVolume(0.5))\n        .timeRange(700, 2000);\n    sequence.effect()\n        .file(\"jb2a.pack_hound_missile\")\n        .atLocation(sourceToken)\n        .stretchTo(target)\n        .waitUntilFinished(-3200);\n    sequence.effect()\n         .file(\"jb2a.explosion.01.orange\")\n         .atLocation(target)\n         .scale(1.2)\n         .zIndex(1)\n         .waitUntilFinished(-1300);\n\n    if (!targetsMissed.has(target.id)) {\n        sequence.sound()\n            .file(\"modules/lancer-weapon-fx/soundfx/Missile_Impact.ogg\")\n            .volume(game.modules.get(\"lancer-weapon-fx\").api.getEffectVolume(0.5));\n\n    }\nsequence.play();\n"}
{"_id":"Nsmpx88frJTCU0Ax","name":"NuclearExplosionSFC","img":"modules/lancer-weapon-fx/icons/mushroom-cloud.png","type":"script","scope":"global","author":"fpthefluffypawed","command":"new Sequence()\n\t.effect(\"modules/lancer-weapon-fx/sprites/jetlancer_explosion_white_bg.png\")\n\t\t.fadeIn(100)\n\t\t.duration(6000)\n\t\t.fadeOut(3000)\n\t\t.screenSpace()\n\t.effect(\"modules/lancer-weapon-fx/sprites/shockwave.png\")\n\t\t.atLocation(token)\n\t\t.duration(7000)\n\t\t.scale(0.2)\n\t\t.scaleOut(12, 7000)\n\t\t.fadeOut(7000)\n\t\t.delay(3000)\n\t.sound(\"modules/lancer-weapon-fx/soundfx/pw_nuke.ogg\")\n\t\t.startTime(800)\n\t\t.delay(1000)\n\t.effect(\"modules/lancer-weapon-fx/video/pw_nuke_effect.webm\")\n\t\t.delay(1000)\n\t\t.atLocation(token)\n\t\t.aboveLighting()\n\t\t.xray()\n\t\t.scale(1)\n\t\t.zIndex(100)\n\t\t.thenDo(remainsAftermath)\n\t/*\n\t\tCRATER EFFECT PERSISTENT AFTERWARDS:\n\t\t- Both following effects are entirely for the crater, remove\n\t\t- or comment it out as needed. Light included.\n\t*/\n\t.effect(\"jb2a.ground_cracks.01.orange\")\n\t\t.persist()\n\t\t.belowTokens()\n\t\t.aboveLighting()\n\t\t.zIndex(1)\n\t\t.xray()\n\t\t.randomRotation()\n\t\t.atLocation(token)\n\t\t.scale(2)\n\t\t.thenDo(createLight)\n\t.effect(\"modules/lancer-weapon-fx/sprites/scorch_mark_hires.png\")\n\t\t.atLocation(token)\n\t\t.scale(2.2)\n\t\t.persist()\n\t\t.belowTokens()\n\t\t.zIndex(0)\n\t\t.randomRotation()\n\t\t.xray()\n\t.canvasPan()\n\t\t.delay(1000)\n        .atLocation(token)\n        .scale(0.5)\n\t\t.shake({\n\t\t\tduration: 20000,\n\t\t\tstrength: 15,\n\t\t\tfadeOutDuration: 10000,\n\t\t\trotation: true\n\t\t})\n.play()\n\nasync function remainsAftermath() {\n\tconsole.log(\"AFTERMATH\");\n\ttoken.document.update({hidden: true});\n}\n\nasync function createLight() {\n\tawait canvas.scene.createEmbeddedDocuments(\"AmbientLight\", [{\n\t\tx: token.document.x + (canvas.dimensions.size / 2),\n\t\ty: token.document.y +  (canvas.dimensions.size / 2),\n\t\tconfig: {\n\t\t\tcolor: \"#ff9117\",\n\t\t\tdim: 10,\n\t\t\tbright: 5,\n\t\t\tanimation: {\n\t\t\t\ttype: \"pulse\",\n\t\t\t},\n\t\t}\n\t}]);\n}"}
{"_id":"tzS44LYDm9vRB0HP","name":"NuclearExplosionSpace","img":"modules/lancer-weapon-fx/icons/mushroom-cloud.png","type":"script","scope":"global","author":"fpthefluffypawed","command":"new Sequence()\n\t.effect(\"modules/lancer-weapon-fx/sprites/jetlancer_explosion_white_bg.png\")\n\t\t.fadeIn(100)\n\t\t.duration(6000)\n\t\t.fadeOut(3000)\n\t\t.screenSpace()\n\t.effect(\"modules/lancer-weapon-fx/sprites/shockwave.png\")\n\t\t.atLocation(token)\n\t\t.duration(7000)\n\t\t.scale(0.2)\n\t\t.scaleOut(12, 7000)\n\t\t.fadeOut(7000)\n\t\t.delay(3000)\n\t.sound(\"modules/lancer-weapon-fx/soundfx/pw_nuke.ogg\")\n\t\t.startTime(800)\n\t\t.delay(1000)\n\t.effect(\"modules/lancer-weapon-fx/video/pw_nuke_effect.webm\")\n\t\t.delay(1000)\n\t\t.atLocation(token)\n\t\t.aboveLighting()\n\t\t.xray()\n\t\t.scale(1)\n\t\t.zIndex(100)\n\t\t.thenDo(remainsAftermath)\n\t.canvasPan()\n\t\t.delay(1000)\n        .atLocation(token)\n        .scale(0.5)\n\t\t.shake({\n\t\t\tduration: 20000,\n\t\t\tstrength: 15,\n\t\t\tfadeOutDuration: 10000,\n\t\t\trotation: true\n\t\t})\n.play()\n\nasync function remainsAftermath() {\n\tconsole.log(\"AFTERMATH\");\n\ttoken.document.update({hidden: true});\n}\n\nasync function createLight() {\n\tawait canvas.scene.createEmbeddedDocuments(\"AmbientLight\", [{\n\t\tx: token.document.x + (canvas.dimensions.size / 2),\n\t\ty: token.document.y +  (canvas.dimensions.size / 2),\n\t\tconfig: {\n\t\t\tcolor: \"#ff9117\",\n\t\t\tdim: 10,\n\t\t\tbright: 5,\n\t\t\tanimation: {\n\t\t\t\ttype: \"pulse\",\n\t\t\t},\n\t\t}\n\t}]);\n}"}
{"_id":"7S31ONuehIUe8R0Q","name":"PlasmaProjector","img":"modules/JB2A_DnD5e/Library/6th_Level/Disintegrate/Disintegrate_01_Regular_Green01_Thumb.webp","type":"script","scope":"global","author":"LancerWeaponFX00","command":"const {targetsMissed, targetTokens, sourceToken} = game.modules.get(\"lancer-weapon-fx\").api.getMacroVariables(this);\n\nconst target = targetTokens[0];\n\nnew Sequence()\n\n    .canvasPan()\n        .duration(1000)\n        .atLocation(sourceToken)\n        .scale(0.25)\n    .effect()\n        .file(\"jb2a.disintegrate.green\")\n        .delay(1000)\n        .startTime(1)\n        .scale(2)\n        .playbackRate(0.6)\n        .filter(\"Glow\", {distance: 3, color: 0x98ec5f, innerStrength: 2})\n        .atLocation(sourceToken)\n        .stretchTo(target)\n        .waitUntilFinished(-3400)\n    .canvasPan()\n\t.duration(2000)\n        .atLocation(target)\n        .scale(0.4)\n        .waitUntilFinished(-500)\n    .effect()\n        .file(\"jb2a.impact.blue\")\n        .filter(\"ColorMatrix\", {hue: 270})\n        .scaleToObject()\n        .atLocation(target, {randomOffset: 1.2, gridUnits: true})\n        .repeats(10, 200, 700)\n        .waitUntilFinished(-500)\n\t.effect(\"modules/lancer-weapon-fx/sprites/jetlancer_explosion_white_bg.png\")\n\t\t.fadeIn(100)\n\t\t.duration(6000)\n\t\t.fadeOut(3000)\n\t\t.screenSpace()\n\t.effect(\"modules/lancer-weapon-fx/sprites/shockwave.png\")\n\t\t.atLocation(target)\n        .filter(\"ColorMatrix\", {hue: 090})\n\t\t.duration(7000)\n\t\t.scale(0.2)\n\t\t.scaleOut(12, 7000)\n\t\t.fadeOut(7000)\n\t\t.delay(3000)\n\t.sound(\"modules/lancer-weapon-fx/soundfx/pw_nuke.ogg\")\n\t\t.startTime(800)\n\t\t.delay(1000)\n\t.effect(\"modules/lancer-weapon-fx/video/pw_nuke_effect.webm\")\n        .filter(\"ColorMatrix\", {hue: 090})\n\t\t.delay(1000)\n\t\t.atLocation(target)\n\t\t.aboveLighting()\n\t\t.xray()\n\t\t.scale(1)\n\t\t.zIndex(100)\n\t\t.thenDo(remainsAftermath)\n\t.canvasPan()\n\t\t.delay(1000)\n        .atLocation(target)\n        .scale(0.5)\n\t\t.shake({\n\t\t\tduration: 20000,\n\t\t\tstrength: 15,\n\t\t\tfadeOutDuration: 10000,\n\t\t\trotation: true\n\t\t})\n\n.play();\n\nfunction remainsAftermath() {\n\tconsole.log(\"AFTERMATH\");\n\ttargetTokens[0].document.update({hidden: true});\n}\n"}
{"_id":"oGArtZBtIRBcRHCh","name":"Power Knuckle","type":"script","author":"LancerWeaponFX00","img":"modules/lancer-weapon-fx/icons/thor-fist.png","scope":"global","command":"const {targetsMissed, targetTokens, sourceToken} = game.modules.get(\"lancer-weapon-fx\").api.getMacroVariables(this);\n\nlet sequence = new Sequence();\n\nfor (const target of targetTokens) {\n    sequence.effect()\n        .file(\"jb2a.unarmed_strike.physical.02.blue\")\n        .scale(0.9)\n        .atLocation(sourceToken)\n        .moveTowards(target)\n        .missed(targetsMissed.has(target.id));\n    sequence.sound()\n        .file(\"modules/lancer-weapon-fx/soundfx/knuckleswing.ogg\")\n        .delay(300)\n        .volume(game.modules.get(\"lancer-weapon-fx\").api.getEffectVolume(0.7));\n    if (!targetsMissed.has(target.id)) {\n        sequence.sound()\n            .file(\"modules/lancer-weapon-fx/soundfx/knucklehit.ogg\")\n            .delay(600)\n            .volume(game.modules.get(\"lancer-weapon-fx\").api.getEffectVolume(0.8))\n            .waitUntilFinished(-100);\n    }\n}\nsequence.play();\n"}
